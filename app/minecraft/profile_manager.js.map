{"version":3,"file":"profile_manager.js","sources":["src/minecraft/profile_manager.js"],"sourcesContent":["const jetpack = require('fs-jetpack');\r\nconst jsonfile = require('jsonfile');\r\n\r\nconst config = require('../config');\r\nconst utils = require('../utils');\r\nconst Account = require('./account').Account;\r\nconst Profile = require('./profile').Profile;\r\n\r\nvar path;\r\n\r\nvar accounts;\r\nvar analytics;\r\nvar clientToken;\r\nvar legacy;\r\nvar profiles;\r\nvar settings;\r\nvar selectedProfile;\r\nvar selectedUser;\r\nvar version;\r\n\r\nexports.init = function() {\r\n\r\n\t// Save the path\r\n\tpath = config.minecraftPath().path('launcher_profiles.json');\r\n\r\n\t// Load the file\r\n\texports.load(config.minecraftPath().path('launcher_profiles.json'));\r\n\r\n\t// Return success\r\n\treturn true;\r\n};\r\n\r\nexports.load = function() {\r\n\r\n\t// Clear the last profile\r\n\tversion = undefined;\r\n\tprofile = undefined;\r\n\r\n\t// Load the launcher profiles file\r\n\tvar profile = jsonfile.readFileSync(path, {throws: false});\r\n\r\n\t// Display error if failed to load\r\n\tif (profile == null) {\r\n\t\tconsole.error(\"ERROR: Failed to load launcher profiles!\", path);\r\n\t\tprofile = {};\r\n\t}\r\n\r\n\t// Save the selected profile\r\n\tselectedProfile = profile.selectedProfile\r\n\r\n\t// Store the version for convenience.\r\n\tparseVersion(profile);\r\n\r\n\t// Parse the launcher settings\r\n\tparseSettings(profile);\r\n\r\n\t// Load the launcher profiles\r\n\tparseProfiles(profile);\r\n\r\n\t// Parse the client token\r\n\tparseClientToken(profile);\r\n\r\n\t// Parse analytics stuff (Just to store it)\r\n\tparseAnalytics(profile);\r\n\r\n\t// Parse the authentication database\r\n\tparseUserAccounts(profile);\r\n};\r\n\r\nexports.save = function() {\r\n\tvar i = 0;\r\n\tvar keys;\r\n\r\n\t// Start building the final result\r\n\tvar result = {};\r\n\r\n\t// Settings\r\n\tif (settings != undefined) {\r\n\t\tresult.settings = settings\r\n\t}\r\n\r\n\t// Launcher Version\r\n\tresult.launcherVersion = version;\r\n\r\n\t// Client Token\r\n\tresult.clientToken = clientToken;\r\n\r\n\t// Launcher Profiles\r\n\tresult.profiles = {};\r\n\tfor (i = 0; i < profiles.length; i++)\r\n\t\tresult.profiles[profiles[i].key()] = profiles[i].json();\r\n\r\n\t// Analytics\r\n\tif (analytics.failCount != undefined)\r\n\t\tresult.analyticsFailcount = analytics.failCount;\r\n\tif (analytics.token != undefined)\r\n\t\tresult.analyticsToken = analytics.token;\r\n\r\n\t// User Accounts\r\n\tresult.authenticationDatabase = {};\r\n\tkeys = Object.keys(accounts);\r\n\tfor (i = 0; i < keys.length; i++) {\r\n\t\tvar key = (legacy) ? keys[i] : accounts[keys[i]].userId();\r\n\t\tresult.authenticationDatabase[key] = accounts[keys[i]].json();\r\n\t}\r\n\r\n\t// Selected Profile\r\n\tresult.selectedProfile = selectedProfile;\r\n\r\n\t// Selected user\r\n\tif (legacy) {\r\n\t\tresult.selectedUser = selectedUser;\r\n\t} else {\r\n\t\tkeys = Object.keys(accounts);\r\n\t\tfor (i = 0; i < keys.length; i++) {\r\n\t\t\tif (accounts[keys[i]].uuid() == selectedUser) {\r\n\t\t\t\tresult.selectedUser = {\r\n\t\t\t\t\taccount: accounts[keys[i]].userId(),\r\n\t\t\t\t\tprofile: selectedUser\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconsole.log(\"Saving launcher profile\");\r\n\tjsonfile.writeFile(path, result, {spaces: 2}, (error) => {\r\n\t\tif (error)\r\n\t\t\tconsole.error(\"ERROR: Failed to save launcher profile!\", error);\r\n\t});\r\n};\r\n\r\nvar parseVersion = function(launcherProfile) {\r\n\r\n\t// Check if the launcher version is defined\r\n\tif (launcherProfile.launcherVersion == undefined) {\r\n\t\t// Generate a launcher version\r\n\t\tversion = {\r\n\t\t\tname: \"2.0.934\",\r\n\t\t\tformat: 20,\r\n\t\t\tprofilesFormat: 2\r\n\t\t};\r\n\t} else {\r\n\t\t// Load the version from the launcher\r\n\t\tversion = launcherProfile.launcherVersion;\r\n\t}\r\n\r\n\t// Determine if the launcher uses legacy format\r\n\tlegacy = version.name.startsWith('1');\r\n};\r\n\r\nvar parseSettings = function(launcherProfile) {\r\n\tsettings = launcherProfile.settings;\r\n};\r\n\r\nvar parseProfiles = function(launcherProfile) {\r\n\r\n\tprofiles = [];\r\n\t\r\n\t// Initialize the profile dictionary if none available\r\n\tif (launcherProfile.profiles == undefined)\r\n\t\treturn;\r\n\r\n\t// Get the keys from the profile\r\n\tvar profs = launcherProfile.profiles;\r\n\tvar keys = Object.keys(profs);\r\n\tvar i, j;\r\n\r\n\tfor (i = 0; i < keys.length; i++) {\r\n\t\tprofiles.push(new Profile(keys[i], profs[keys[i]]));\r\n\t}\r\n};\r\n\r\nvar parseClientToken = function(launcherProfile) {\r\n\tif (launcherProfile.clientToken != undefined) {\r\n\t\tclientToken = launcherProfile.clientToken;\r\n\t\treturn;\r\n\t}\r\n\texports.generateClientToken();\r\n};\r\n\r\nvar parseAnalytics = function(launcherProfile) {\r\n\tanalytics = {\r\n\t\tfailCount: launcherProfile.analyticsFailcount,\r\n\t\ttoken: launcherProfile.analyticsToken\r\n\t}\r\n};\r\n\r\nvar parseUserAccounts = function(launcherProfile) {\r\n\taccounts = {};\r\n\tif (version.name.startsWith('1'))\r\n\t\treturn parseUserAccountsLegacy(launcherProfile);\r\n\r\n\tvar userIds = Object.keys(launcherProfile.authenticationDatabase);\r\n\tfor (var i = 0; i < userIds.length; i++) {\r\n\t\tvar account = launcherProfile.authenticationDatabase[userIds[i]];\r\n\t\tvar uuid = Object.keys(account.profiles)[0];\r\n\t\taccounts[uuid] = new Account(false, {\r\n\t\t\tusername: account.profiles[uuid].displayName,\r\n\t\t\taccessToken: account.accessToken,\r\n\t\t\tuserId: userIds[i],\r\n\t\t\tuuid: uuid,\r\n\t\t\temail: account.username\r\n\t\t});\r\n\t}\r\n\r\n\tif (launcherProfile.selectedUser != undefined)\r\n\t\tselectedUser = launcherProfile.selectedUser.profile;\r\n\telse\r\n\t\tselectedUser = null;\r\n};\r\n\r\nvar parseUserAccountsLegacy = function(launcherProfile) {\r\n\t// User IDs\r\n\tvar uuids = Object.keys(launcherProfile.authenticationDatabase);\r\n\tfor (var i = 0; i < uuids.length; i++) {\r\n\t\tvar account = launcherProfile.authenticationDatabase[uuids[i]];\r\n\t\taccounts[uuids[i]] = new Account(true, {\r\n\t\t\tusername: account.displayName,\r\n\t\t\taccessToken: account.accessToken,\r\n\t\t\tuserId: account.userid,\r\n\t\t\tuuid: uuids[i],\r\n\t\t\temail: account.username\r\n\t\t});\r\n\r\n\t\tif (launcherProfile.selectedUser != undefined)\r\n\t\t\tselectedUser = launcherProfile.selectedUser;\r\n\t\telse\r\n\t\t\tselectedUser = null;\r\n\t}\r\n}\r\n\r\nexports.generateClientToken = function() {\r\n\tclientToken = utils.randomHexStringPartitioned([8, 4, 4, 4, 12]);\r\n};\r\n\r\nexports.profiles = function() {\r\n\r\n};\r\n\r\n// Generate the list of available profiles sorted by 'last used' date\r\nexports.profilesAvailable = function() {\r\n\tvar results = [];\r\n\tfor (var i = 0; i < profiles.length; i++) {\r\n\t\tif (profiles[i].displayName() != null) {\r\n\t\t\tresults.push({\r\n\t\t\t\tdisplayName: profiles[i].displayName(),\r\n\t\t\t\tkey: profiles[i].key()\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\treturn results;\r\n};\r\n\r\nexports.accounts = function() {\r\n\tvar results = [];\r\n\tvar keys = Object.keys(accounts);\r\n\tfor (var i = 0; i < keys.length; i++)\r\n\t\tresults.push(accounts[keys[i]]);\r\n\treturn results;\r\n};\r\n\r\nexports.addAccount = function(account) {\r\n\taccounts.push(account);\r\n};\r\n\r\nexports.removeAccount = function(account) {\r\n\tvar index = accounts.indexOf(account);\r\n\tif (index > -1)\r\n\t\taccounts.splice(index, 1);\r\n};"],"names":[],"mappings":"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"}