{"version":3,"file":"window_manager.js","sources":["src/window_manager.js"],"sourcesContent":["const { BrowserWindow } = require('electron');\r\nconst path = require('path');\r\nconst url = require('url');\r\n\r\nlet windows;\r\n\r\n// Create a window\r\nvar createWindow = function(name, properties) {\r\n\r\n\tconsole.log(\"Creating window \" + name);\r\n\r\n\tif (windows[name] != undefined)\r\n\t\tconsole.warn(\"WARNING: Window \" + name + \" already exists!\");\r\n\r\n\t// Property stuff...\r\n\tproperties['toolBar'] = false;\r\n\tif (properties.show == undefined)\r\n\t\tproperties.show = false;\r\n\r\n\t// Create the window and remove the menu bar\r\n\tvar win = new BrowserWindow(properties);\r\n\twin.name = name;\r\n\twin.isReadyToShow = false;\r\n\twin.showWhenReadyEnabled = false;\r\n\twin.setMenu(null);\r\n\r\n\twin.on('closed', () => {\r\n\t\twindows[name] = undefined;\r\n\t});\r\n\r\n\twin.on('show', () => {\r\n\t\tconsole.log(\"Checking for the splash...\");\r\n\t\tif ((windows.splash != undefined || windows.splash != null) && windows.splash != win) {\r\n\t\t\tconsole.log(\"Closing the splash...\");\r\n\t\t\twindows.splash.close();\r\n\t\t\twindows.splash = undefined;\r\n\t\t}\r\n\t});\r\n\r\n\t// Give the setView method\r\n\twin.setView = (view) => {\r\n\t\twin.isReadyToShow = false;\r\n\t\twin.loadURL(url.format({\r\n\t\t\tpathname: path.join(__dirname, 'views/' + view + '.htm'),\r\n\t\t\tprotocol: 'file:',\r\n\t\t\tslashes: true\r\n\t\t}));\r\n\t};\r\n\r\n\twin.on('ready-to-show', () => {\r\n\t\twin.isReadyToShow = true;\r\n\t\tif (win.showWhenReadyEnabled)\r\n\t\t\twin.show();\r\n\t\twin.showWhenReadyEnabled = false;\r\n\t});\r\n\r\n\twin.showWhenReady = () => {\r\n\t\tif (win.isReadyToShow)\r\n\t\t\twin.show();\r\n\t\telse\r\n\t\t\twin.showWhenReadyEnabled = true;\r\n\t};\r\n\r\n\t// Add the window to the list and return\r\n\twindows[name] = win;\r\n\treturn win;\r\n}\r\n\r\nexports.init = function() {\r\n\twindows = {};\r\n};\r\n\r\nexports.splash = function(callback) {\r\n\tvar splashWin = createWindow('splash', {\r\n\t\twidth: 600,\r\n\t\theight: 400,\r\n\t\tframe: false\r\n\t});\r\n\tsplashWin.on('ready-to-show', () => {\r\n\t\tsplashWin.show();\r\n\t\tsetTimeout(callback, 500);\r\n\t});\r\n\tsplashWin.setView('splash');\r\n}\r\n\r\nexports.splashWindow = function() {\r\n\treturn windows.splash;\r\n}\r\n\r\nexports.initControlPanel = function() {\r\n\tvar controlWin = createWindow('control', {\r\n\t\twidth: 1280,\r\n\t\theight: 720,\r\n\t\tframe: true,\r\n\t\tminWidth: 992,\r\n\t\tminHeight: 500,\r\n\t});\r\n\tcontrolWin.on('closed', () => {\r\n\t\tcontrolWin = null;\r\n\t});\r\n\t// controlWin.openDevTools();\r\n\tcontrolWin.setView('index');\r\n};\r\n\r\nexports.controlPanel = function() {\r\n\tif (windows.control == undefined)\r\n\t\texports.initControlPanel();\r\n\treturn windows.control;\r\n};\r\n\r\nexports.quit = function() {\r\n\tconsole.log(\"Closing windows...\");\r\n\tvar keys = Object.keys(windows);\r\n\tfor (var i = 0; i < keys.length; i++) {\r\n\t\twindows[keys[i]] = null;\r\n\t}\r\n}"],"names":[],"mappings":"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"}