{"version":3,"file":"intercraft_auth.js","sources":["src/intercraft_auth.js"],"sourcesContent":["const needle = require('needle');\r\nconst config = require('./config');\r\n\r\nconst DOMAIN = \"https://dev.intercraftmc.com/auth\";\r\n\r\nexports.isOnline = function(callback) {\r\n\tneedle.get(DOMAIN + '/status', (error, response) => {\r\n\t\tcallback(response && response.statusCode == 200);\r\n\t}); \r\n};\r\n\r\nexports.login = function(email, password, callback) {\r\n\tconsole.log(\"Requesting access token with the given credentials\");\r\n\tneedle.post(DOMAIN + '/login', {\r\n\t\t'email': email,\r\n\t\t'password': password\r\n\t}, (err, resp, body) => {\r\n\t\tconfig.setAccessToken(resp.statusCode == 200 ? body.access_token : null);\r\n\t\tcallback({\r\n\t\t\t'isValid': resp.statusCode == 200,\r\n\t\t\t'errorCode': body.error_code\r\n\t\t});\r\n\t});\r\n};\r\n\r\nexports.fetchProfile = function(callback) {\r\n\tneedle.post(DOMAIN + '/profile', {\r\n\t\t'access_token': config.accessToken()\r\n\t}, (err, resp, body) => {\r\n\t\tcallback(resp.statusCode == 200 ? body : null);\r\n\t});\r\n};"],"names":[],"mappings":";;AAAA,MAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AACjC,MAAM,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;AAEnC,MAAM,MAAM,GAAG,mCAAmC,CAAC;;AAEnD,OAAO,CAAC,QAAQ,GAAG,SAAS,QAAQ,EAAE;CACrC,MAAM,CAAC,GAAG,CAAC,MAAM,GAAG,SAAS,EAAE,CAAC,KAAK,EAAE,QAAQ,KAAK;EACnD,QAAQ,CAAC,QAAQ,IAAI,QAAQ,CAAC,UAAU,IAAI,GAAG,CAAC,CAAC;EACjD,CAAC,CAAC;CACH,CAAC;;AAEF,OAAO,CAAC,KAAK,GAAG,SAAS,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE;CACnD,OAAO,CAAC,GAAG,CAAC,oDAAoD,CAAC,CAAC;CAClE,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,QAAQ,EAAE;EAC9B,OAAO,EAAE,KAAK;EACd,UAAU,EAAE,QAAQ;EACpB,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,KAAK;EACvB,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,IAAI,GAAG,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,CAAC;EACzE,QAAQ,CAAC;GACR,SAAS,EAAE,IAAI,CAAC,UAAU,IAAI,GAAG;GACjC,WAAW,EAAE,IAAI,CAAC,UAAU;GAC5B,CAAC,CAAC;EACH,CAAC,CAAC;CACH,CAAC;;AAEF,OAAO,CAAC,YAAY,GAAG,SAAS,QAAQ,EAAE;CACzC,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,UAAU,EAAE;EAChC,cAAc,EAAE,MAAM,CAAC,WAAW,EAAE;EACpC,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,KAAK;EACvB,QAAQ,CAAC,IAAI,CAAC,UAAU,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;EAC/C,CAAC,CAAC;CACH"}