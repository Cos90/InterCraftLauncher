{"version":3,"file":"config.js","sources":["src/config.js"],"sourcesContent":["const fs = require('fs');\r\nconst jetpack = require('fs-jetpack');\r\nconst jsonfile = require('jsonfile');\r\nconst os = require('os');\r\n\r\nvar config;\r\n\r\nvar javaHome;\r\nvar rootPath = jetpack;\r\nvar dataPath = function() {\r\n\tvar path = jetpack.cwd(os.homedir());\r\n\tif (process.platform == 'win32')\r\n\t\tpath = path.cwd('./AppData/Roaming');\r\n\treturn path;\r\n}();\r\n\r\nrequire('find-java-home')((err, home) => {\r\n\tif (err)\r\n\t\treturn console.err(\"Could not find java installation!\");\r\n\tjavaHome = jetpack.cwd(home);\r\n});\r\n\r\nvar generate = function() {\r\n\tconfig = {\r\n\t\t\"configured\": false,\r\n\t\t\"minecraft_path\": dataPath.path('.minecraft'),\r\n\t\t\"access_token\": null\r\n\t};\r\n};\r\n\r\nexports.init = function() {\r\n\tif (fs.existsSync(rootPath.path('config.json'))) {\r\n\t\tconfig = jsonfile.readFileSync(rootPath.path('./config.json'));\r\n\t} else {\r\n\t\tgenerate();\r\n\t\texports.save();\r\n\t}\r\n\treturn config['configured'];\r\n};\r\n\r\nexports.save = function() {\r\n\tjsonfile.writeFile(rootPath.path('./config.json'), config);\r\n};\r\n\r\nexports.minecraftPath = function() {\r\n\treturn jetpack.cwd(config['minecraft_path']);\r\n};\r\n\r\nexports.setMinecraftPath = function(path) {\r\n\tconfig['minecraft_path'] = path;\r\n};\r\n\r\nexports.tempPath = function() {\r\n\tvar path;\r\n\tif (process.platform == 'win32')\r\n\t\tpath = dataPath.cwd('../Local/Temp');\r\n\telse\r\n\t\tpath = jetpack.cwd('/tmp');\r\n\treturn path;\r\n};\r\n\r\nexports.javaPath = function() {\r\n\treturn javaHome.cwd('bin/java.exe');\r\n};\r\n\r\nexports.accessToken = function() {\r\n\treturn config['access_token'];\r\n};\r\n\r\nexports.setAccessToken = function(token) {\r\n\tconfig['access_token'] = token;\r\n\texports.save();\r\n};\r\n\r\nexports.uuid = function() {\r\n\treturn config['uuid'];\r\n}\r\n\r\nexports.altUuids = function() {\r\n\treturn config['alt_uuids'];\r\n}"],"names":[],"mappings":"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"}